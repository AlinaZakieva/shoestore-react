# Архитектура проекта «ShoeStore React»

## 1. Общая идея

Проект «ShoeStore React» представляет собой веб-приложение интернет-магазина обуви, разработанное на JavaScript с использованием фреймворка React и TypeScript. 

Цель проекта — предоставить пользователю удобный и понятный интерфейс для просмотра каталога обуви, изучения карточек отдельных товаров и управления корзиной при оформлении заказа. 

Репозиторий проекта организуется как монорепозиторий, в котором находятся несколько связанных между собой частей:

- основное клиентское приложение;
- библиотека общих пользовательских интерфейсных компонентов.

## 2. Структура репозитория

Репозиторий курсового проекта планируется вести как монорепозиторий, в котором будет несколько связанных между собой проектов. Базовая структура папок может выглядеть следующим образом:

```text
shoestore-react/
├── apps/                        # Прикладные приложения
│   └── web/                     # Основное клиентское приложение 
│       ├── package.json
│       ├── tsconfig.json
│       └── src/
│           ├── app/             # Точка входа и настройки приложения (App, роутинг, провайдеры)
│           ├── pages/           # Страницы, привязанные к маршрутам
│           ├── widgets/         # Крупные повторно используемые блоки интерфейса
│           ├── features/        # Завершенные куски функциональности (фильтры, корзина и т.п.)
│           ├── entities/        # Сущности предметной области (товар, корзина и др.)
│           └── shared/          # Общие утилиты, конфигурация и примитивные компоненты
│
├── packages/                    # Переиспользуемые пакеты
│   └── ui-library/              # Библиотека общих UI-компонентов
│       ├── package.json
│       ├── tsconfig.json
│       └── src/
│           ├── index.ts         # Публичный реэкспорт компонентов библиотеки
│           ├── Button/          # Базовые кнопки
│           ├── Input/           # Поля ввода
│           ├── ProductCard/     # Карточка товара
│           ├── ProductGrid/     # Сетка карточек товаров
│           ├── Layout/          # Контейнеры и обертки для разметки
│           └── CartSummary/     # Сводка по корзине (количество и стоимость)
│
├── docs/                        # Текстовая документация проекта
│   ├── architecture.md          # Описание архитектурных решений (текущий файл)
│   └── mvp.md                   # Описание функциональных требований и MVP
│
├── package.json                 # Общие настройки npm и workspaces
├── README.md                    # Краткое описание проекта
└── .gitignore                   # Файлы и папки, исключенные из git
```
В дальнейшем структура может дополняться, однако базовое разделение на клиентское приложение и библиотеку общих компонентов остается неизменным.

## 3. Проект apps/web — основное приложение

### 3.1. Назначение

Проект `apps/web` — это основное клиентское приложение, с которым взаимодействует пользователь.  
Приложение работает как одностраничный интерфейс: при переходах между страницами (каталог, карточка товара, корзина) выполняется смена содержимого без полной перезагрузки сайта.

Основная задача этого приложения — обеспечить удобную работу с витриной магазина обуви:
- просмотр каталога обуви с адаптивной сеткой карточек;
- переход к детальной карточке выбранной модели;
- управление корзиной (добавление, удаление товаров, подсчет общей стоимости);
- подготовка к расширению функциональности (авторизация, личный кабинет, оформление заказа).

Вся логика, связанная с работой пользователя с сайтом, концентрируется в `apps/web`, а визуальные «кирпичики» интерфейса берутся из общей библиотеки `ui-library`.

### 3.2. Структура исходного кода

Внутри `apps/web/src` планируется следующее разделение:

- `app/` — точка входа и базовая настройка приложения.
  Здесь находятся компоненты верхнего уровня (например, `App.tsx`), подключение роутинга, провайдеры для контекста корзины и, при необходимости, авторизации.

- `pages/` — страницы, привязанные к маршрутам.
  Каждая страница представляет собой отдельный экран:
  - `CatalogPage` — список товаров с базовыми фильтрами;
  - `ProductPage` — детальная информация о выбранной модели обуви;
  - `CartPage` — отображение корзины с выбранными товарами;
  - `AuthPage` — страница авторизации и регистрации (на будущее развитие проекта);
  - `NotFoundPage` — вывод сообщения о том, что запрошенная страница не найдена.

- `widgets/` — крупные блоки интерфейса, которые повторяются на разных страницах.
  Например:
  - `Header` — шапка сайта с логотипом и мини-отображением корзины;
  - `Footer` — подвал сайта с контактами и служебной информацией;
  - `CartWidget` — компактное отображение корзины в шапке.

- `features/` — завершенные куски функциональности, которые решают конкретную задачу.
  Примеры:
  - `AddToCart` — логика добавления товара в корзину и связи с компонентами интерфейса;
  - `ProductFilters` — управление фильтрами каталога по размеру, бренду или цене;
  - `AuthForm` — форма входа и регистрации пользователя.

- `entities/` — сущности предметной области, с которыми работает приложение.
  В первую очередь:
  - `Product` — описание структуры данных товара, вспомогательные функции и типы;
  - `Cart` — модели данных корзины, подсчет общей суммы, работа с позициями.

- `shared/` — общие элементы, которые могут использоваться во всех остальных слоях:
  - `api/` — обертки над HTTP-запросами (например, загрузка каталога товаров);
  - `config/` — конфигурационные параметры приложения;
  - `lib/` — небольшие вспомогательные функции;
  - `ui/` — простые визуальные компоненты и обертки над компонентами из `ui-library`.

Такое разделение помогает не смешивать логику, связанную с конкретными страницами, сущностями и общими утилитами. В результате код проще поддерживать и развивать: новые страницы и функции можно добавлять, практически не затрагивая уже работающие части приложения.

## 4. Проект packages/ui-library — библиотека общих компонентов

### 4.1. Назначение

Проект `packages/ui-library` представляет собой библиотеку переиспользуемых визуальных компонентов.  
Эти компоненты отвечают за внешний вид элементов интерфейса и базовое поведение, но не содержат бизнес-логики, завязанной на конкретные сценарии применения.

Основные задачи библиотеки:

- обеспечить единый визуальный стиль всего приложения;
- сократить дублирование разметки и стилей;
- упростить развитие проекта за счет централизованных правок в одном месте;
- дать возможность использовать те же компоненты в других приложениях (например, в будущей админ-панели интернет-магазина).

### 4.2. Структура исходного кода

Внутри `packages/ui-library/src` планируется следующая структура:

- `index.ts` — единая точка экспорта компонентов библиотеки.  
  Из этого файла будут реэкспортироваться все публичные компоненты (`Button`, `ProductCard`, `ProductGrid` и т.д.), чтобы их можно было импортировать одной строкой.

- `Button/` — базовые кнопки.
  - общий компонент кнопки (основная, вторичная, опасная);
  - поддержка отключенного состояния;
  - единые размеры, шрифты и отступы.

- `Input/` — поля ввода.
  - текстовые поля для форм (логин, пароль, поиск по каталогу);
  - отображение ошибок валидации и подсказок;
  - единое оформление для всех форм приложения.

- `ProductCard/` — карточка товара для каталога:
  - изображение обуви;
  - название модели;
  - короткое описание;
  - цена;
  - кнопка «Добавить в корзину».

- `ProductGrid/` — адаптивная сетка карточек товаров.
  - отвечает за расположение карточек на странице каталога;
  - подстраивается под ширину экрана (несколько колонок на десктопе, меньше — на мобильных устройствах).

- `Layout/` — простые контейнеры и обертки.
  - блоки для выравнивания контента по центру;
  - карточки с тенями и скругленными углами;
  - отступы и базовая типографика.

- `CartSummary/` — компактный блок с информацией о корзине.
  - количество товаров;
  - общая стоимость;
  - выводится, например, на странице оформления заказа или в боковой колонке.

При необходимости структура библиотеки может быть расширена новыми компонентами, но базовый принцип остается прежним: каждый компонент отвечает за внешний вид и простое поведение, а не за бизнес-логику приложения.

### 4.3. Принципы использования компонентов

При работе с `ui-library` предполагаются следующие принципы:

- компоненты библиотеки не содержат логики запросов к серверу и не знают о формате API;
- компоненты не принимают на себя ответственность за хранение состояния корзины или авторизации;
- все данные передаются в них через пропсы, а действия (например, добавление товара в корзину) реализуются колбэками, которые передает основное приложение;
- стили оформляются единообразно, чтобы внешний вид приложения был целостным, независимо от того, где используется компонент.

Благодаря этому библиотека остается независимой от конкретной реализации приложения и может переиспользоваться в других проектах.

## 5. Используемые библиотеки и инструменты

В проекте планируется использовать современный стек для разработки на React и TypeScript.  

### 5.1. Основные библиотеки (runtime-зависимости)

**React (`^19.x`) и React DOM (`^19.x`)**  
Базовые библиотеки для построения пользовательского интерфейса.  
Используются и в клиентском приложении `apps/web`, и в библиотеке компонентов `packages/ui-library`.

**React Router DOM (`^7.x`)**  
Отвечает за маршрутизацию в одностраничном приложении.  
Позволяет организовать переходы между страницами каталога, карточки товара, корзины, авторизации и страницы 404 без полной перезагрузки сайта.

**TypeScript (`^5.x`)**  
Применяется во всех проектах репозитория.  
Обеспечивает статическую типизацию, упрощает рефакторинг и снижает количество ошибок на этапе разработки.

**Axios (`^1.x`) или обертка над `fetch`**  
Используется в слое `shared/api` приложения `apps/web` для работы с HTTP-запросами:  
загрузка списка товаров, получение данных по конкретной модели, работа с корзиной и авторизацией (при расширении проекта).

**clsx / classnames (`^2.x`)**  
Утилита для удобного формирования CSS-классов по условиям (активные пункты меню, состояние кнопок и т.п.).  
Применяется как в `apps/web`, так и в `packages/ui-library`.

При необходимости список библиотек может быть расширен, но ядро проекта строится вокруг React, React Router и TypeScript.

### 5.2. Инструменты разработки и качества кода

**Vite (`^7.x`)**  
Сборщик и dev-сервер для проектов `apps/web` и `packages/ui-library`.  
Обеспечивает быструю разработку, горячую перезагрузку и оптимизацию бандла для production.

**ESLint (`^9.x`)**  
Инструмент для проверки качества кода и соблюдения единого стиля.  
Используется для обоих проектов: проверяет корректность импорта, формат кода, потенциальные ошибки.

**Prettier (`^3.x`)**  
Автоматическое форматирование кода.  
Применяется совместно с ESLint для поддержания единого стиля оформления файлов.

**Jest (`^29.x`)**  
Тестовый раннер для запуска модульных и компонентных тестов как в `apps/web`, так и в `ui-library`.

**@testing-library/react (`^16.x`) и @testing-library/jest-dom**  
Набор утилит для тестирования React-компонентов «с точки зрения пользователя»:  
поиск элементов по тексту, ролям, атрибутам, проверка отображения состояний.

**npm workspaces**  
Используется для организации монорепозитория и управления зависимостями между `apps/web` и `packages/ui-library` из одного корневого `package.json`.

## 6. Планируемые компоненты и их назначение

### 6.1. Компоненты клиентского приложения (apps/web)

В клиентском приложении компоненты группируются по слоям: страницы, виджеты, функциональные блоки (features), сущности и общие элементы.

**Страницы (`pages/`):**

- **`CatalogPage`**  
  Отображает каталог обуви в виде сетки карточек.  
  Содержит панель фильтров и сортировки, список товаров и базовую пагинацию (при необходимости).

- **`ProductPage`**  
  Детальная страница конкретного товара.  
  Показывает фотографию обуви, полное описание, характеристики, цену и кнопку «Добавить в корзину».

- **`CartPage`**  
  Страница с содержимым корзины.  
  Отображает список выбранных товаров, их количество, общую стоимость и позволяет удалять позиции.

- **`AuthPage`**  
  Страница авторизации и регистрации (запасной функционал для развития проекта).  
  Содержит формы входа и создания учетной записи.

- **`NotFoundPage`**  
  Страница для обработки неизвестных маршрутов.  
  Показывает сообщение о том, что страница не найдена, и ссылку/кнопку для возврата в каталог.

**Виджеты (`widgets/`):**

- **`Header`**  
  Шапка сайта, которая показывает логотип, навигацию по основным разделам и мини-корзину с количеством товаров.

- **`Footer`**  
  Нижняя часть страницы с контактными данными, ссылками на служебную информацию и копирайтом.

- **`CartWidget`**  
  Компактный вид корзины, отображающий сумму и количество товаров.  
  Может использоваться в шапке или боковой колонке.

**Функциональные блоки (`features/`):**

- **`AddToCart`**  
  Компоненты и логика, отвечающие за добавление товара в корзину.  
  Взаимодействуют с сущностью `Cart` и передают обработчики в визуальные компоненты (`ProductCard`, кнопки).

- **`ProductFilters`**  
  Панель фильтров для каталога: размер, бренд, ценовой диапазон и т.п.  
  Управляет состоянием фильтров и передает настройки в компонент, который выводит список товаров.

- **`AuthForm`**  
  Формы входа и регистрации на странице `AuthPage`.  
  Отвечает за валидацию полей и отправку данных на сервер (после подключения API).

**Сущности (`entities/`):**

- **`Product`**  
  Типы и вспомогательные функции для работы с данными товара: идентификатор, название, описание, цена, ссылки на изображения и т.д.

- **`Cart`**  
  Модели корзины и операции над ними (добавление, удаление, изменение количества, пересчет итоговой суммы).

**Общие элементы (`shared/`):**

- **`shared/api`**  
  Обертки над HTTP-запросами: загрузка списка товаров, получение данных по одному товару, работа с корзиной и авторизацией (при расширении проекта).

- **`shared/lib`**  
  Небольшие вспомогательные функции (форматирование цены, работа с датами, утилиты для фильтрации и сортировки списка товаров).

- **`shared/ui`**  
  Примитивные интерфейсные компоненты и обертки над компонентами из `ui-library` (например, кнопки, поля ввода, простые карточки).

### 6.2. Компоненты библиотеки интерфейса (packages/ui-library)

В библиотеке `ui-library` собраны переиспользуемые визуальные компоненты.  
Они не содержат бизнес-логики и используются в основном приложении в разных комбинациях.

Основные планируемые компоненты:

- **`Button`**  
  Базовая кнопка для проекта.  
  Поддерживает несколько вариантов оформления (основная, вторичная, опасная), состояния наведения и отключения.

- **`Input`**  
  Поля ввода текста.  
  Используются в формах поиска, авторизации, фильтрации каталога.  
  Поддерживают вывод ошибок валидации и подсказок.

- **`ProductCard`**  
  Карточка товара для каталога.  
  Содержит изображение обуви, название, краткое описание, цену и кнопку «Добавить в корзину».  
  Используется на главной странице каталога и в других списках товаров.

- **`ProductGrid`**  
  Сетка для размещения списка карточек товаров.  
  Отвечает за адаптивное расположение карточек (несколько колонок на широком экране, меньше — на мобильных устройствах).

- **`Layout`**  
  Набор простых контейнеров и оберток (карточки, блоки с отступами, выравнивание по центру).  
  Помогает выстраивать страницы в одном стиле и не дублировать разметку.

- **`CartSummary`**  
  Небольшой блок с краткой сводкой по корзине: количество товаров и итоговая стоимость.  
  Может использоваться в шапке, на странице оформления заказа или в боковой колонке.

В дальнейшем набор компонентов `ui-library` можно расширять (например, уведомлениями, модальными окнами, выпадающими списками), но базовый состав ориентирован на то, чтобы реализовать MVP интернет-магазина обуви.

## 7. Роутинг и отображаемые страницы

В клиентском приложении `apps/web` планируется использовать браузерный роутер.  
Каждый маршрут отвечает за отдельную страницу или состояние интерфейса.

### 7.1. Основные маршруты приложения

- **`/` — главная страница (CatalogPage)**  
  Страница каталога обуви.  
  На ней отображаются:
  - сетка карточек товаров;
  - панель фильтров и, при необходимости, сортировки;
  - краткая информация о выбранных товарах (название, цена, фотография).  

  С главной страницы пользователь может перейти на детальную карточку товара и в корзину.

- **`/product/:id` — страница карточки товара (ProductPage)**  
  Страница конкретной модели обуви.  
  Здесь выводятся:
  - фотография товара;
  - полное описание;
  - основные характеристики (размерный ряд, материал, бренд и т.п.);
  - актуальная цена;
  - кнопка «Добавить в корзину».  

  Переход на эту страницу выполняется из каталога по клику на карточку товара.

- **`/cart` — страница корзины (CartPage)**  
  Страница, на которой показаны все товары, добавленные в корзину:
  - список позиций (название, цена, количество);
  - общая стоимость заказа;
  - кнопки для удаления товара из корзины.  

  В дальнейшем на этой странице может быть реализован переход к оформлению заказа.

- **`/auth` — страница авторизации (AuthPage)**  
  Страница с формами входа и регистрации (функционал на будущее расширение проекта).  
  Используется для идентификации пользователя перед оформлением заказа и возможным доступом к личному кабинету.

- **`*` — страница 404 (NotFoundPage)**  
  Резервный маршрут для всех неизвестных адресов.  
  Отображает сообщение о том, что страница не найдена, и дает возможность вернуться в каталог (например, через кнопку «На главную»).

### 7.2. Общий layout и повторяющиеся элементы

Для всех основных страниц (каталог, карточка товара, корзина, авторизация) используется общий каркас:

- в верхней части всегда отображается шапка (**Header**) с логотипом и мини-корзиной;
- в центральной области выводится содержимое конкретной страницы (CatalogPage, ProductPage и т.д.);
- в нижней части при необходимости отображается подвал (**Footer**) с контактами и служебной информацией.

Такое разделение позволяет:

- сохранить единый внешний вид на всех страницах;
- переиспользовать виджеты `Header` и `Footer`;
- упорядочить структуру приложения: роутер отвечает за выбор страницы, а layout — за общий каркас интерфейса.